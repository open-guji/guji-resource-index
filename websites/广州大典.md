# 广州大典

广州大典是广州图书馆主持编纂的大型地方历史文献丛书数据库，系统收集、整理、保存广州（含今广东省部分地区）历史文献典籍。2015年出版完成，共520册。

- 网站链接：https://gzdd.gzlib.org.cn/
- 分享协议：需注册登录，免费使用（通过微信小程序"粤通读"注册读者证）
- 约 4,064 种文献，编为520册
- 资源类型：经部、史部、子部、集部、丛部五大类地方文献
- 不支持 IIIF 协议
- 支持 [bookget](https://github.com/deweizhu/bookget) 下载（PDF 格式）

## 搜索与浏览

- 网站主页：https://gzdd.gzlib.org.cn/
- 支持按关键词搜索全文
- 可按经部、史部、子部、集部、丛部五大分类浏览
- 需要注册登录（通过微信小程序"粤通读"注册广州图书馆读者证）

## 每本书能看到什么

| 字段 | 说明 | 示例 |
|------|------|------|
| 题名 | 书名 | 待确认 |
| 著者 | 作者/编者 | 待确认 |
| 版本 | 版本信息 | 待确认 |
| 分类 | 经/史/子/集/丛 | 待确认 |

网站为 SPA 单页应用（Vue.js），提供全文影像在线阅览，可直接下载 PDF。

## 示例

- 全文阅读页：https://gzdd.gzlib.org.cn/website/gzddDatabase/articleFulltext?id=GZDD034603002

---

# 开发者文档

## URL 结构

### 全文阅读页
```
https://gzdd.gzlib.org.cn/website/gzddDatabase/articleFulltext?id={article_id}
```
- `article_id`：文献标识符，格式如 `GZDD034603002`

## 搜索 API

网站为 Vue.js SPA，数据通过后端 API 异步加载。具体搜索 API 端点待确认。

## 元数据获取

SPA 应用，HTML 源码中无实际内容（仅 `<div id="app"></div>`）。元数据通过 JavaScript 异步请求后端 API 获取，具体 API 端点和响应格式待确认。

## 下载

### PDF 直接下载

广州大典提供 PDF 格式下载：
```
https://gzdd.gzlib.org.cn/attach/GZDD/Attach/{article_id}.pdf
```
- `article_id`：从页面 URL 的 `id` 参数提取，正则：`(?i)id=([A-z0-9_-]+)`

### 认证要求

- 需要有效的登录 Cookie（通过"粤通读"注册读者证后获取）
- 必需请求头：
  - `User-Agent`
  - `Origin: https://gzdd.gzlib.org.cn`
  - `Referer: https://gzdd.gzlib.org.cn/...`
  - Cookie

### bookget 支持

bookget 通过 `app/gzlib.go` 支持此网站。

关键逻辑：
1. 从 URL 中提取 `id` 参数
2. 构建 PDF 下载 URL：`https://{host}/attach/GZDD/Attach/{id}.pdf`
3. 使用配置的 Cookie 和请求头下载 PDF
4. 支持多线程下载和断点续传

相关源码：
- https://github.com/deweizhu/bookget/blob/main/app/gzlib.go
