# 俄罗斯国家图书馆（National Library of Russia / Российская национальная библиотека）

<!--
  本文件分两部分：
  - 分割线以上：用户文档，面向普通用户，语言简洁易懂，不含技术细节
  - 分割线以下：开发者文档，面向程序员，包含 API、HTML 解析、下载逻辑等技术细节
-->

俄罗斯国家图书馆（РНБ）位于圣彼得堡，是俄罗斯三大国家图书馆中历史最悠久的一座，馆藏超过 3,700 万件文献。其数字图书馆收录超过 65 万件数字化文献，包括图书、期刊、报纸、乐谱、地图、手稿等。东方手稿部收藏约 28,000 件东方文献，包括中文、满文、日文手稿，亚非部则藏有近 50,000 册中文出版物。

- 网站链接：https://nlr.ru/
- 英文版：https://nlr.ru/eng
- 数字图书馆：https://nlr.ru/eng/RA2403/digital-library
- 电子目录：https://primo.nlr.ru/
- 分享协议：数字化资源公开访问，具体使用条款见 [使用条款](https://nlr.ru/eng)
- 超过 650,000 件数字化文献
- 资源类型：图书、期刊、报纸、乐谱、地图、手稿、图片、录音
- 不支持 IIIF 协议

## 搜索与浏览

### 电子目录（Primo 系统）

- 搜索页面：https://primo.nlr.ru/primo_library/libweb/action/search.do
- 英文界面：https://primo.nlr.ru/primo_library/libweb/action/search.do?prefLang=en_US
- 输入关键词即可搜索（支持俄文、英文等）
- 整合了 25 个以上数据库
- 支持按多维度筛选搜索结果

### 数字图书馆

- 入口：https://nlr.ru/eng/RA2403/digital-library
- 按专题分类浏览数字化馆藏：
  - 文学名著（Literary Landmarks）：6 个子集，涵盖欧洲图书、乐谱、各国文学、善本等
  - 善本：17-18 世纪文献
  - Rossica：1930 年前关于俄罗斯的外文著作
  - 地图：16-20 世纪地图、城市规划
  - 手稿：16-17 世纪历史文献
  - 俄罗斯先锋派艺术

### 手稿部在线目录

- 东方手稿：https://nlr.ru/manuscripts/RA2905/oriental-manuscripts
- 手稿部在线目录：https://nlr.ru/manuscripts/RA3124/online-catalogues
- 可按手稿类别（希腊文、斯拉夫文、西欧文、东方文）浏览

### 亚非部

- 介绍页面：https://nlr.ru/eng/RA2246/asian-african-collection
- 收藏超过 200 万件亚非语言文献
- 中文文献近 50,000 册，包括中国古典文学全集、近现代作家作品、历史、艺术、语言学、医学等
- 含珍贵的彼得罗夫汉学收藏（V.V. Petrov Collection）

- 无需注册登录即可检索目录
- 数字化资料可在线浏览

## 每本书能看到什么

| 字段 | 说明 | 示例 |
|------|------|------|
| Title | 题名 | Описание Пекина |
| Author | 作者 | — |
| Date | 年代 | 18 век |
| Language | 语言 | Chinese |
| Material Type | 资料类型 | Manuscript |
| Shelfmark | 馆藏号 | Дорн № 12 |
| Collection | 所属馆藏 | Oriental Manuscripts |
| Physical Description | 物理描述 | 纸本、卷轴、册页等 |

- 数字化文献可在线浏览
- 部分手稿有详细的编目描述
- 无全文 OCR
- 具体的查看器功能取决于文献类型

## 示例

- 数字图书馆：https://nlr.ru/eng/RA2403/digital-library
- 电子目录搜索：https://primo.nlr.ru/primo_library/libweb/action/search.do?prefLang=en_US
- 东方手稿介绍：https://nlr.ru/eng/RA2688/oriental-manuscripts
- 亚非部介绍：https://nlr.ru/eng/RA2246/asian-african-collection
- 手稿部在线目录：https://nlr.ru/manuscripts/RA3124/online-catalogues

---

# 开发者文档

## URL 结构

### 电子目录（Primo 系统）

#### 搜索
```
https://primo.nlr.ru/primo_library/libweb/action/search.do?prefLang={lang}
```
- `prefLang`：界面语言，如 `en_US`（英文）、`ru_RU`（俄文）

### 数字图书馆

数字图书馆的具体条目 URL 结构依赖 Primo 系统，格式：
```
https://primo.nlr.ru/primo_library/libweb/action/display.do?doc={doc_id}
```
- `doc_id`：文献标识符

### 网站信息页面

```
https://nlr.ru/eng/RA{page_id}/{slug}
```
- `page_id`：页面编号，如 `2403`、`2688`
- `slug`：URL 别名，如 `digital-library`、`oriental-manuscripts`

## 搜索 API

俄罗斯国家图书馆使用 Ex Libris Primo 发现系统。

Primo 提供标准的搜索 API，但需注意：
- 公开搜索接口通过 URL 参数传递
- 无已知公开 REST API 文档
- 搜索参数示例：
  ```
  https://primo.nlr.ru/primo_library/libweb/action/search.do?fn=search&ct=search&initialSearch=true&vl(freeText0)={keyword}
  ```

## 元数据获取

### Primo 目录记录

Primo 系统返回的页面为动态渲染，元数据嵌入在 HTML 中。

主要提取方式：
- 通过 Primo 的 URL 参数获取记录详情
- 部分记录可能通过 Primo API（PNX 格式）获取 XML/JSON 元数据

### 字段映射

| 中文字段 | 提取方式 |
|---------|---------|
| 题名 | Primo 记录页面 HTML 解析 |
| 作者 | Primo 记录页面 HTML 解析 |
| 年代 | Primo 记录页面 HTML 解析 |
| 语言 | Primo 记录页面 HTML 解析 |
| 馆藏号 | Primo 记录页面 HTML 解析 |

## 下载

### bookget 支持

注意：bookget 中的 `rslru.go` 是针对**俄罗斯国立图书馆**（Russian State Library, rsl.ru，位于莫斯科）的支持，而非本文档所述的**俄罗斯国家图书馆**（National Library of Russia, nlr.ru，位于圣彼得堡）。两者是不同的机构。

bookget 目前**不直接支持** nlr.ru。

- 俄罗斯国立图书馆（rsl.ru）的 bookget 源码（供参考）：https://github.com/deweizhu/bookget/blob/main/app/rslru.go

### 直接下载

俄罗斯国家图书馆的数字化资源通过 Primo 系统提供，下载方式取决于具体文献类型：

1. **数字化图书/手稿**：通过 Primo 查看器在线浏览
2. **无统一的批量下载接口**
3. **不支持 IIIF 协议**

### 俄罗斯国立图书馆（rsl.ru）API 参考

虽然 nlr.ru 与 rsl.ru 是不同机构，但 rsl.ru 的 API 结构可作为参考：

```
# 元数据 API
GET https://viewer.rsl.ru/api/v1/document/{bookId}/info
# 返回 JSON：包含 PageCount、书籍描述等

# 单页图片 API
GET https://viewer.rsl.ru/api/v1/document/{bookId}/page/{pageNumber}
```

### 注意事项

- 俄罗斯国家图书馆（nlr.ru，圣彼得堡）和俄罗斯国立图书馆（rsl.ru，莫斯科）是两个不同的机构，不要混淆
- nlr.ru 使用 Primo 发现系统，rsl.ru 有自建的 API 查看器
- 东方手稿部的数字化内容有限，部分仅提供目录信息而无数字化图像
- 网站主要为俄文界面，英文版信息较为有限
- 联系邮箱：ref.service@nlr.ru（咨询服务）、manuscripts@nlr.ru（手稿部）
