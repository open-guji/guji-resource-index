# 越南汉喃古籍文献典藏数位化计划

<!--
  本文件分两部分：
  - 分割线以上：用户文档，面向普通用户，语言简洁易懂，不含技术细节
  - 分割线以下：开发者文档，面向程序员，包含 API、HTML 解析、下载逻辑等技术细节
-->

越南喃字保存基金会（Vietnamese Nom Preservation Foundation, VNPF）与越南国家图书馆合作建设的汉喃古籍数字图书馆。收录越南国家图书馆、胜严寺（Chua Thang Nghiem）、普仁寺（Chua Pho Nhan）三个来源的汉喃文献，涵盖经、史、子、集四部，是越南最早的汉喃古籍数字图书馆。基金会于 2018 年完成使命后解散，数字化档案于 2021 年移交哥伦比亚大学图书馆保管。网站目前仍可访问。

- 网站链接：https://lib.nomfoundation.org/
- 基金会主页：https://nomfoundation.org/
- 约 1,250 部古籍（约 192,000 页图像）
- 资源类型：汉文（Han script）与喃字（Nom script）手稿、刻本
- 不支持 IIIF 协议
- 托管于 ibiblio（北卡罗来纳州立大学图书馆基础设施）
- 无需注册登录，免费访问

## 搜索与浏览

- NLV 藏品首页：https://lib.nomfoundation.org/collection/1/
- 胜严寺藏品：https://lib.nomfoundation.org/collection/2/
- 普仁寺藏品：https://lib.nomfoundation.org/collection/3/
- 在藏品页面顶部有搜索框，输入关键词（汉字或越南语罗马字）即可搜索
- NLV 藏品可按四部分类浏览：经部（Classics, 68 部）、史部（History, 371 部）、子部（Philosophy, 400 部）、集部（Literary collections, 411 部）
- 无需注册登录

## 每本书能看到什么

| 字段 | 说明 | 示例 |
|------|------|------|
| Title | 书名（汉字 + 越南语罗马字） | 大南一統志 / Dai Nam nhat thong chi |
| ID | 数字化编号 | NLVNPF-0140-01 |
| Call Number | 馆藏索书号 | R.779 |
| Creator | 著者 | Cao Xuan Duc, Luu Duc Xung, Tran Xan |
| Source | 来源机构 | National Library of Vietnam |
| Publisher | 出版者/刊刻者 | 同人寺藏板 |
| Place | 出版地 | Thuan Hoa (Hue) |
| Date | 年代 | 1909 (Duy Tan year 3) |
| Description | 内容说明 | 详细描述卷次、内容等 |
| Language | 文字类型 | Han script / Nom script |
| Type | 文献类型 | Text |
| Dimensions | 尺寸 | 28 x 16cm |
| Pages | 页数 | 76 |
| Condition | 保存状况 | Fair |
| Format | 版本形式 | Woodblock text / Handwritten text |
| Imaging Date | 数字化日期 | 14/07/2008 |

- 可在线逐页翻阅扫描图像
- 无 PDF 下载功能
- 无全文文字（OCR）

## 示例

- 藏品详情页：https://lib.nomfoundation.org/collection/1/volume/168/
- 在线阅读（逐页）：https://lib.nomfoundation.org/collection/1/volume/612/page/1
- 另一详情页：https://lib.nomfoundation.org/collection/1/volume/357/

---

# 开发者文档

## URL 结构

### 藏品首页
```
https://lib.nomfoundation.org/collection/{collection_id}/
```
- `collection_id`：藏品编号，1 = NLV（越南国家图书馆），2 = 胜严寺，3 = 普仁寺

### 卷册详情页
```
https://lib.nomfoundation.org/collection/{collection_id}/volume/{volume_id}/
```
- `volume_id`：卷册编号，如 357、612、168 等

### 单页阅读页
```
https://lib.nomfoundation.org/collection/{collection_id}/volume/{volume_id}/page/{page_number}
```
- `page_number`：页码，从 1 开始

### 图片 URL
```
https://lib.nomfoundation.org/site_media/nom/{item_id}/jpeg/{item_id}-{page_number}.jpg
https://lib.nomfoundation.org/site_media/nom/{item_id}/large/{item_id}-{page_number}.jpg
```
- `item_id`：文献编号，如 `nlvnpf-0463`（小写）
- `jpeg/` 目录为标准分辨率，`large/` 目录为高分辨率
- `page_number`：零填充页码，如 `00001`（待确认具体格式）

## 搜索 API

网站基于 Django 框架构建，搜索通过页面表单提交，无公开 JSON API。

搜索页面 URL：
```
https://lib.nomfoundation.org/collection/{collection_id}/?search={keyword}
```
具体搜索参数格式待确认。

分类浏览通过 Topics 链接实现，URL 格式待确认。

## 元数据获取

网站为传统服务端渲染页面（非 SPA），元数据直接嵌入 HTML 中。

### 字段映射

| 中文字段 | 提取方式 |
|---------|---------|
| 题名 | 页面标题，汉字 + 越南语罗马字格式 |
| 编号 | HTML 中 ID 字段 |
| 索书号 | HTML 中 Call Number 字段 |
| 著者 | HTML 中 Creator 字段 |
| 来源 | HTML 中 Source 字段 |
| 出版者 | HTML 中 Publisher 字段 |
| 出版地 | HTML 中 Place 字段 |
| 年代 | HTML 中 Date 字段 |
| 语言 | HTML 中 Language 字段 |
| 页数 | HTML 中 Pages 字段 |
| 尺寸 | HTML 中 Dimensions 字段 |
| 版本形式 | HTML 中 Format 字段 |

具体 HTML 标签结构和 CSS 选择器待确认（页面结构较简单，字段以标签-值对形式排列）。

## 下载

### IIIF
不支持 IIIF 协议。

### bookget
bookget 不支持此网站（wiki 中列出了 URL 但源码中无对应处理文件）。

### 图片直接下载
图片可通过直接构造 URL 下载：

1. 从详情页获取 `item_id`（如 `nlvnpf-0463`）和总页数
2. 构造图片 URL：
   ```
   https://lib.nomfoundation.org/site_media/nom/{item_id}/large/{item_id}-{page_number}.jpg
   ```
3. 遍历页码下载所有图片

注意事项：
- 图片无水印
- 无需特殊请求头（无 Referer / Cookie 校验）
- 托管于 ibiblio，服务器较稳定
- 页码格式需从阅读页的 HTML 中确认（可能为零填充数字）
