# 京都大学贵重资料数字档案

京都大学图书馆网络建设的贵重资料数字档案（京都大学貴重資料デジタルアーカイブ），是日本最大规模的大学数字馆藏之一，收录了包括国宝、重要文化财在内的珍贵古籍和历史文献。

- 网站链接：https://rmda.kulib.kyoto-u.ac.jp/
- 分享协议：免费使用，需注明出处（主要馆藏无需申请，高分辨率需联系图书馆）
- 约 25,905 种、2,155,567 张图片（截至 2025 年 3 月）
- 资源类型：和古书、汉籍善本（谷村文库等）、手稿、地图、绘画等
- 支持 IIIF 协议，可使用 [bookget](https://github.com/deweizhu/bookget) 等工具下载
- 支持日文和英文界面

## 搜索与浏览

在首页搜索框输入关键词即可搜索，检索对象包括书志信息全文、翻刻文字和解说：

- 搜索页面：https://rmda.kulib.kyoto-u.ac.jp/
- 英文界面：https://rmda.kulib.kyoto-u.ac.jp/en
- 也可通过京都大学 OPAC（KULINE）检索
- 无需注册登录

## 每本书能看到什么

| 字段 | 说明 | 示例 |
|------|------|------|
| タイトル / Title | 书名 | 陸奏約選 |
| 著者 / Creator | 作者 | 待确认 |
| 年代 / Date | 出版年代 | 待确认 |
| コレクション / Collection | 所属文库 | 谷村文库、富士川文庫 等 |
| 形態 / Format | 册数/形制 | 待确认 |

每本书提供 IIIF 高清图像查看器（Mirador3 或 Universal Viewer），支持在线翻阅。图片可下载为 JPEG 格式，最大 2000 像素。

## 示例

- 详情页：https://rmda.kulib.kyoto-u.ac.jp/en/item/rb00010293
- IIIF Manifest：https://rmda.kulib.kyoto-u.ac.jp/iiif/metadata_manifest/RB00010293/manifest.json

---

# 开发者文档

## URL 结构

### 详情页
```
https://rmda.kulib.kyoto-u.ac.jp/item/{item_id}
https://rmda.kulib.kyoto-u.ac.jp/en/item/{item_id}     # 英文版
```
- `item_id`：资源标识符，如 `rb00010293`（不区分大小写）

### 详情页（带 manifest 参数）
```
https://rmda.kulib.kyoto-u.ac.jp/en/item/rb00010293?manifest=/iiif/metadata_manifest/RB00010293/manifest.json
```

### IIIF Manifest
```
https://rmda.kulib.kyoto-u.ac.jp/iiif/metadata_manifest/{ID}/manifest.json
```
- `ID`：资源标识符（大写），如 `RB00023161`

## 搜索 API

待确认。搜索功能基于书志信息全文、翻刻和解说文字。

## 元数据获取

待进一步分析。详情页信息可通过 HTML 解析或 IIIF manifest 中的 metadata 字段获取。

### 字段映射

IIIF manifest 中 `metadata` 数组包含书志信息字段，具体字段名待通过实际 manifest 确认。

## 下载

### IIIF 下载

支持 IIIF Presentation API 和 Image API（具体版本待确认）。

从 manifest 获取图片流程：
1. 获取 manifest：`https://rmda.kulib.kyoto-u.ac.jp/iiif/metadata_manifest/{ID}/manifest.json`
2. 解析 `sequences[].canvases[]`
3. 提取每个 canvas 的 `images[].resource.service.@id`
4. 拼接 IIIF Image API 参数下载

注意：
- 图片下载为 JPEG 格式，最大 2000 像素
- 原始尺寸图片需向所属图书馆申请

### bookget 支持

bookget 通过 IIIF 标准接口支持此平台。相关源码：
- https://github.com/deweizhu/bookget/blob/main/app/kyotou.go
- https://github.com/deweizhu/bookget/blob/main/app/iiif.go

另外，京都大学人文科学研究所（`kanji.zinbun.kyoto-u.ac.jp`）是另一个独立的古籍数据库，也被 bookget 支持。
