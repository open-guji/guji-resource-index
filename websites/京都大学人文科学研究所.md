# 京都大学人文科学研究所 东方学数字图书馆

<!--
  本文件分两部分：
  - 分割线以上：用户文档，面向普通用户，语言简洁易懂，不含技术细节
  - 分割线以下：开发者文档，面向程序员，包含 API、HTML 解析、下载逻辑等技术细节
-->

京都大学人文科学研究所（附属东亚人文信息学研究中心）建设的东方学数字图书馆（東方學デジタル圖書館），提供研究所所藏汉籍善本的全文彩色影像。同时运营全国汉籍数据库（全國漢籍データベース），收录日本全国主要图书馆所藏汉籍的书志信息。研究所藏书约 54.9 万册，其中汉籍 32.3 万册，是日本最重要的汉籍研究机构之一。

- 东方学数字图书馆：http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/top.html
- 全国汉籍数据库：http://kanji.zinbun.kyoto-u.ac.jp/kanseki
- 数据库一览：http://kanji.zinbun.kyoto-u.ac.jp/db/
- 研究所主页：https://www.zinbun.kyoto-u.ac.jp/
- 分享协议：学术研究用途免费使用
- 资源类型：汉籍善本全文影像（经、史、子、集四部分类）、石刻拓本、甲骨文等
- 不支持 IIIF 协议（与京都大学贵重资料数字档案 rmda.kulib.kyoto-u.ac.jp 是不同系统）
- 可使用 [bookget](https://github.com/deweizhu/bookget) 下载

## 搜索与浏览

### 东方学数字图书馆

东方学数字图书馆提供研究所所藏部分汉籍的全文扫描影像，用户可直接浏览目录选择想看的书籍：

- 入口页面：http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/top.html
- 按书目列表浏览，点击书名进入该书的菜单页，再选择具体卷册查看
- 收录经典如《十三经注疏》《说文解字》等重要汉籍
- 无需注册登录

### 全国汉籍数据库

全国汉籍数据库是日本主要公共图书馆、大学图书馆所藏"汉籍"书志信息的联合目录：

- 搜索页面：http://kanji.zinbun.kyoto-u.ac.jp/kanseki
- 可按书名、著者、版本等检索，支持从下拉列表选择特定馆藏机构
- 采用传统经、史、子、集四部分类（加丛书部为五部）
- 定义范围：中国人用中文所著、大体辛亥革命以前人物所著之书

### 其他数据库

- 石刻拓本资料：http://kanji.zinbun.kyoto-u.ac.jp/db-machine/imgsrv/takuhon/
- 东洋学文献类目检索：http://www.kita.zinbun.kyoto-u.ac.jp/database/

## 每本书能看到什么

### 东方学数字图书馆

| 字段 | 说明 | 示例 |
|------|------|------|
| 书名 | 书籍题名 | 十三經注疏 |
| 卷数 | 总卷册数 | 二十卷 |
| 影像 | 每页全彩扫描图 | 逐页浏览 |

- 提供全文彩色影像，逐页翻阅
- 无 PDF 下载功能，需逐页查看或使用工具下载
- 无 OCR 全文文字

### 全国汉籍数据库

| 字段 | 说明 | 示例 |
|------|------|------|
| 书名 | 题名 | 尚書正義 |
| 著者 | 作者/编者 | (唐)孔穎達 等奉勅撰 |
| 版本 | 刊刻版本信息 | 宋刊本 |
| 所藏 | 藏书机构 | 京都大学人文科学研究所 |
| 分类 | 四部分类 | 經部 書類 |

## 示例

- 东方学数字图书馆首页：http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/top.html
- 书籍菜单页示例（十三经注疏之一）：http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/A002menu.html
- 全国汉籍数据库：http://kanji.zinbun.kyoto-u.ac.jp/kanseki

---

# 开发者文档

## URL 结构

### 东方学数字图书馆 - 书籍菜单页
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/{book_id}menu.html
```
- `book_id`：书籍标识符，如 `A002`、`A027`、`B003`、`B052`、`B110`、`D005` 等
- 字母前缀可能对应四部分类（A=经部、B=史部 等），数字为序号

### 东方学数字图书馆 - 影像目录
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/
```
可列出所有 HTML 文件。

### 东方学数字图书馆 - 子集
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/ShiSanJingZhuShu/html/A002menu.html
```
部分书籍有子路径（如 `ShiSanJingZhuShu` = 十三经注疏）。

### 影像文件目录
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/volumen/{book_id}/
```
- 影像文件存放目录，可能直接列出图片文件

### 全国汉籍数据库
```
http://kanji.zinbun.kyoto-u.ac.jp/kanseki
```
- 传统服务端渲染页面

### 石刻拓本
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/imgsrv/takuhon/
```

## 搜索 API

东方学数字图书馆无搜索 API，内容以静态目录形式组织。

全国汉籍数据库为传统表单提交检索，无已知公开 JSON API。

## 元数据获取

### 东方学数字图书馆

网站为传统服务端渲染的静态 HTML 页面。菜单页（`*menu.html`）包含该书各卷的链接列表，需要解析 HTML 提取链接和标题。

### 全国汉籍数据库

传统 HTML 表格形式展示搜索结果，需 HTML 解析提取字段。

## 下载

### bookget 支持

bookget 支持东方学数字图书馆。在 bookget wiki 中有记录：

- URL 格式：`http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/html/{book_id}menu.html`
- 也支持子集路径：`http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/ShiSanJingZhuShu/html/A002menu.html`

bookget 可能通过解析菜单页的链接，逐页获取影像文件进行下载。

注意：bookget 源码目录中没有看到专门的 `zinbun.go` 文件，该网站的下载逻辑可能集成在通用模块中，或以模板方式处理。

### 手动下载

影像文件可能存放在以下路径：
```
http://kanji.zinbun.kyoto-u.ac.jp/db-machine/toho/volumen/{book_id}/
```

### 注意事项

- 网站使用 HTTP 协议（非 HTTPS），部分页面可能无法通过现代浏览器直接访问
- 不支持 IIIF，无 manifest
- 与京都大学贵重资料数字档案（rmda.kulib.kyoto-u.ac.jp，支持 IIIF）是完全不同的系统
- 服务器较老，连接可能不稳定（kanji.zinbun.kyoto-u.ac.jp 有时无法访问）
