# 臺灣華文電子書庫

臺灣國家圖書館建設的華文電子書數據庫，2015年起推動「臺灣文獻數位典藏計畫」，聯合各大學圖書館、公共圖書館將1911-1949年間出版的書籍數位化，提供免費線上閱覽。

- 網站連結：https://taiwanebook.ncl.edu.tw/zh-tw
- 分享協議：免費開放閱覽（需遵守國家圖書館使用規範）
- 約 13,778 部電子書（其中 12,178 部為1911-1949年出版、595部政府出版品、1,005部學術著作）
- 資源類型：民國時期書籍、政府出版品、學術著作
- 不支持 IIIF 協議
- 支持 [bookget](https://github.com/deweizhu/bookget) 下載（PDF 格式）

## 搜索與瀏覽

- 主頁面：https://taiwanebook.ncl.edu.tw/zh-tw
- 在搜索框輸入關鍵詞即可搜索
- 可按分類瀏覽
- 無需註冊登錄即可瀏覽，部分功能可能需要 reCAPTCHA 驗證

## 每本書能看到什麼

| 字段 | 說明 | 示例 |
|------|------|------|
| 題名 | 書名 | 待確認 |
| 著者 | 作者/編者 | 待確認 |
| 出版者 | 出版機構 | 待確認 |
| 出版年 | 出版年代 | 待確認 |
| 來源館 | 提供數位化的圖書館 | 待確認 |

每本書提供 PDF 查看器在線閱覽。

## 示例

- 閱讀頁：https://taiwanebook.ncl.edu.tw/zh-tw/book/NTUL-9910003011/reader

---

# 開發者文檔

## URL 結構

### 閱讀頁
```
https://taiwanebook.ncl.edu.tw/zh-tw/book/{book_id}/reader
```
- `book_id`：書目標識符，格式如 `NTUL-9910003011`
- `NTUL` 為來源館代碼（國立臺灣大學圖書館）

### 書目詳情頁
```
https://taiwanebook.ncl.edu.tw/zh-tw/book/{book_id}
```

## 搜索 API

無公開 JSON API，通過網頁表單搜索。網站使用 Semantic UI 框架，前端有部分動態加載（Vue.js build assets）。

## 元數據獲取

網站為服務端渲染（PHP/Laravel），HTML 中包含實際內容。使用 Semantic UI 框架。

具體元數據 HTML 結構待確認。

## 下載

### PDF 下載

bookget 通過 `app/huawen.go` 支持此網站。

關鍵邏輯：
1. 從 URL 中提取書目 ID（路徑中 `/zh-tw/book/` 後的部分）
2. 如果 URL 不含 `/reader`，自動追加
3. 獲取閱讀頁 HTML，用正則 `viewer.html\?file=([^"]+)` 提取 PDF 路徑
4. 構建完整 PDF URL：`https://taiwanebook.ncl.edu.tw{pdf_path}`
5. 下載 PDF 文件

### 認證要求

- 需要 Cookie（通過瀏覽器訪問獲取）
- 必需請求頭：
  - `User-Agent`
  - `Referer`（指向 PDF viewer 路徑）
- 網站使用 Google reCAPTCHA 驗證

### 第三方工具

- Chrome 擴展：[Taiwan eBooks Downloader](https://github.com/IvanWoo/taiwan-ebooks-downloader) — 直接在瀏覽器中下載 PDF

相關源碼：
- https://github.com/deweizhu/bookget/blob/main/app/huawen.go
